<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset=”utf-8”>
	<title>New England Flu/Pneumonia Deaths 2016-2020</title>
		
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css">
  		
 </head>
<body>
	<svg id="map"></svg>
	<script src="lib/d3.min.js"></script>
    	<script src="lib/d3.js"></script>
	<script src="https://d3js.org/d3-queue.v3.min.js"></script>
	<script src="//d3js.org/topojson.v1.min.js"></script>

    	<script>
 		window.onload = setMap();

		function setMap(){
			var width = 960;
        		var height = 460;
			var map = d3.select("body")
        			.append("svg")
        			.attr("class", "map")
        			.attr("width", width)
        			.attr("height", height);

			var projection = d3.geoAlbers()
        			.center([-68.78928371378728, 43.877822762882666])
        			.rotate([-2, 0])
        			.parallels([38, 50])
        			.scale(2000)
        			.translate([width / 2, height / 2]);

    			var path = d3.geoPath()
        			.projection(projection);
			
			var domain = [10.5, 13.5]
			var range = ["#F8CAEE","#BF76AF","#852170"]
			var colorScale = d3.scaleThreshold()
  			.domain(domain)
  			.range(range);
			
			var promises = []
			var data = d3.map();
			promises.push(d3.json, "lower_48.topojson")
        		promises.push(d3.json, "NE_States_flu.topojson")
			promises.push(d3.json, "canada.topojson")
			promises.push(d3.csv,"Flu_deaths_New_England.csv", function(d) { data.set(d.name, +d.fludeaths_2016, +d.fludeaths_2017, +d.fludeaths_2018, +d.fludeaths_2019, +d.fludeaths_2020); })
				
			myDataPromises = Promise.all(promises).then(function(my_data) {
 
 			var topo = my_data[0]
			});
		};
    			
	 </script>
	</body>
</html>
